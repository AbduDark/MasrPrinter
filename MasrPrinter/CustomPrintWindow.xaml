<Window x:Class="MasrPrinter.CustomPrintWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="طباعة مخصصة" 
        Height="700" Width="900"
        WindowStartupLocation="CenterOwner"
        FlowDirection="RightToLeft"
        Background="{StaticResource BackgroundColor}">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="{StaticResource AccentColor}" Padding="20">
            <TextBlock Text="🎨 طباعة مخصصة" 
                       FontSize="28" 
                       FontWeight="Bold" 
                       Foreground="White"
                       HorizontalAlignment="Center"/>
        </Border>

        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="30">
                <Border Style="{StaticResource CardPanel}" Margin="0">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="20"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <TextBlock Text="إعدادات الملصق" Style="{StaticResource SubtitleText}"/>
                            
                            <TextBlock Text="النص / الرقم:" Style="{StaticResource LabelText}"/>
                            <TextBox x:Name="CustomTextBox" 
                                     Text="1234567890" 
                                     Style="{StaticResource ModernTextBox}"
                                     TextChanged="CustomTextBox_TextChanged"/>

                            <CheckBox x:Name="WithBarcodeCheckBox" 
                                      Content="طباعة مع باركود" 
                                      IsChecked="True"
                                      FontSize="16"
                                      Margin="10"
                                      Checked="WithBarcodeCheckBox_Changed"
                                      Unchecked="WithBarcodeCheckBox_Changed"/>

                            <TextBlock Text="نوع الباركود:" 
                                       Style="{StaticResource LabelText}"
                                       x:Name="BarcodeTypeLabel"/>
                            <ComboBox x:Name="BarcodeTypeComboBox" 
                                      Style="{StaticResource ModernComboBox}"
                                      SelectedIndex="0"
                                      SelectionChanged="BarcodeTypeComboBox_SelectionChanged">
                                <ComboBoxItem Content="Code 128 (خطي)"/>
                                <ComboBoxItem Content="QR Code (ثنائي الأبعاد)"/>
                            </ComboBox>

                            <Button Content="🔄 معاينة" 
                                    Style="{StaticResource AccentButton}"
                                    Click="PreviewButton_Click"
                                    Margin="10,20,10,10"/>
                        </StackPanel>

                        <StackPanel Grid.Column="2">
                            <TextBlock Text="معاينة مباشرة" Style="{StaticResource SubtitleText}"/>
                            <Border BorderBrush="{StaticResource BorderColor}" 
                                    BorderThickness="2" 
                                    CornerRadius="8" 
                                    Padding="20"
                                    Background="White"
                                    Margin="10"
                                    MinHeight="400">
                                <Grid>
                                    <Image x:Name="PreviewImage" 
                                           Stretch="Uniform"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"/>
                                    <TextBlock x:Name="PreviewPlaceholder"
                                               Text="المعاينة ستظهر هنا"
                                               Style="{StaticResource BodyText}"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               Foreground="{StaticResource SecondaryTextColor}"/>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </Grid>
                </Border>

                <Border Style="{StaticResource CardPanel}" Margin="0,20,0,0" Background="#FFF3E0">
                    <StackPanel>
                        <TextBlock Text="💡 نصائح:" FontWeight="Bold" Foreground="{StaticResource AccentColor}" Margin="0,0,0,10"/>
                        <TextBlock Text="• يمكنك إدخال أي نص أو أرقام" Foreground="{StaticResource TextColor}"/>
                        <TextBlock Text="• Code 128 مناسب للأرقام والنصوص القصيرة" Foreground="{StaticResource TextColor}" Margin="0,5,0,0"/>
                        <TextBlock Text="• QR Code يمكنه حفظ بيانات أكثر ويعمل بشكل أفضل مع الهواتف" Foreground="{StaticResource TextColor}" Margin="0,5,0,0"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <Border Grid.Row="2" Background="White" BorderBrush="{StaticResource BorderColor}" BorderThickness="0,1,0,0" Padding="20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Button Grid.Column="0"
                        Content="💾 حفظ وطباعة"
                        Style="{StaticResource AccentButton}"
                        Click="SaveButton_Click"
                        Height="50"
                        FontSize="18"/>

                <Button Grid.Column="1"
                        Content="إغلاق"
                        Click="CloseButton_Click"
                        Height="50"
                        FontSize="18">
                    <Button.Style>
                        <Style TargetType="Button" BasedOn="{StaticResource ModernButton}">
                            <Setter Property="Background" Value="{StaticResource SecondaryTextColor}"/>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#616161"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </Grid>
        </Border>
    </Grid>
</Window>
